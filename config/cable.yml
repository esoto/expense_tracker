# Async adapter only works within the same process, so for manually triggering cable updates from a console,
# and seeing results in the browser, you must do so from the web console (running inside the dev process),
# not a terminal started via bin/rails console! Add "console" to any action or any ERB template view
# to make the web console appear.
development:
  adapter: async
  # Allow connections from localhost in development
  allowed_request_origins: [ "http://localhost:3000", "http://127.0.0.1:3000" ]

test:
  adapter: test

staging:
  adapter: async
  # Allow connections from staging domains
  allowed_request_origins: 
    - /https?:\/\/staging\..*/
    - /https?:\/\/.*\.staging\..*/
    - "http://localhost:3000"
    - "http://127.0.0.1:3000"

production:
  adapter: solid_cable
  connects_to:
    database:
      writing: cable
  polling_interval: 0.1.seconds
  message_retention: 1.day
  # Configure allowed origins for production
  # Update these with your actual production domain(s)
  allowed_request_origins: [ /https:\/\/.*\.yourdomain\.com/ ]
  # Disable origin checking if behind a proxy (use with caution)
  # disable_request_forgery_protection: false
